(function(){"use strict";var t={5619:function(t,e,s){s(6278);var a=s(7837),i=(s(4870),s(9940)),n=(s(3975),s(1412)),r=(s(7057),s(1911)),o=(s(4663),s(338)),l=(s(9497),s(7384)),c=(s(6624),s(8235)),u=(s(2943),s(7735)),h=(s(9735),s(520)),d=(s(4112),s(5263)),m=(s(5758),s(976)),p=(s(6283),s(1197)),f=(s(2205),s(9851)),g=s(8935),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("router-view")],1)},v=[],_={name:"MusicAppApp"},w=_,b=s(1001),Z=(0,b.Z)(w,y,v,!1,null,"4297f299",null),L=Z.exports,k=s(2809),x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{staticClass:"header"},[t._v("推荐歌单")]),s("van-row",{attrs:{type:"flex",justify:"space-between",gutter:"6"}},t._l(t.resList,(function(e){return s("van-col",{key:e.id,attrs:{span:"8"}},[s("van-image",{attrs:{fit:"contain",width:"100",height:"100",src:e.picUrl}}),s("p",[t._v(t._s(e.name))])],1)})),1),s("div",{staticClass:"header"},[t._v("最新音乐")]),t._l(t.newsongList,(function(t){return s("song-item",{key:t.id,attrs:{name:t.name,author:t.song.artists[0].name,id:t.id}})}))],2)},C=[],S=s(6166),$=s.n(S);$().defaults.baseURL="https://netease-cloud-music-api-sooty-phi.vercel.app/",$().defaults.withCredentials=!0;var I=$();const E=t=>I({url:"/personalized",params:t}),O=t=>I({url:"/personalized/newsong",params:t}),V=t=>I({url:"/search",params:t}),T=t=>I({url:`/song/detail?ids=${t}`,method:"GET"}),M=t=>I({url:`/lyric?id=${t}`,method:"GET"}),j=t=>I({url:"/comment/music",params:t}),q=t=>I({url:"/login",data:t,method:"post"}),z=E,U=O,A=V,P=T,N=M,R=j,D=q;var G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-cell",{attrs:{title:t.name,center:"",label:t.author},on:{click:t.comment},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-icon",{attrs:{name:"play-circle-o",size:"1.6rem"},on:{click:function(e){return e.stopPropagation(),t.playMusic.apply(null,arguments)}}})]},proxy:!0}])})],1)},F=[],H={name:"MusicAppSongItem",props:{name:String,author:String,id:Number},methods:{playMusic(){this.$router.push({path:"/play",query:{id:this.id}})},comment(){this.$router.push({path:"/comment",query:{id:this.id}})}}},B=H,J=(0,b.Z)(B,G,F,!1,null,"67f6471c",null),K=J.exports,Q={name:"HomeIndex",data(){return{resList:[],newsongList:[]}},async created(){const t=await z({limit:6});this.resList=t.data.result;const e=await U();this.newsongList=e.data.result},components:{SongItem:K}},W=Q,X=(0,b.Z)(W,x,C,!1,null,"af468cee",null),Y=X.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("van-search",{attrs:{background:"#4fc08d",shape:"round",placeholder:"请输入搜索关键词","input-align":"left"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),0===this.songlist.length?s("div",{staticClass:"li_song"},[s("p",[t._v("实时热搜")]),s("ul",t._l(t.daysonglist,(function(e){return s("li",{key:e.id,staticClass:"hot_item",on:{click:function(s){return t.onsearch(e.name)}}},[t._v(t._s(e.name))])})),0)]):s("div",{staticClass:"song"},[s("p",[t._v("最佳匹配")]),t._l(t.songlist,(function(t){return s("song-item",{key:t.id,attrs:{name:t.name,author:t.artists[0].name,id:t.id}})}))],2)],1)},et=[],st={name:"SearchIndex",data(){return{searchValue:"",songlist:[],daysonglist:[],timer:null}},async created(){const t=await U();this.daysonglist=t.data.result},methods:{async onsearch(t){this.searchValue=t;const e=await A({keywords:this.searchValue});this.songlist=e.data.result.songs,setTimeout((()=>{clearTimeout(this.timer)}))}},watch:{async searchValue(){if(clearTimeout(this.timer),0===this.searchValue.length)return this.songlist=[];this.timer=setTimeout((async()=>{const t=await A({keywords:this.searchValue});this.songlist=t.data.result.songs}),2e3)}},components:{SongItem:K}},at=st,it=(0,b.Z)(at,tt,et,!1,null,"5745ae27",null),nt=it.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{title:t.layout_title,fixed:""}}),s("keep-alive",[s("router-view")],1),s("van-tabbar",{attrs:{route:""}},[s("van-tabbar-item",{attrs:{replace:"",to:"/layout/home",icon:"home-o"}},[t._v("首页")]),s("van-tabbar-item",{attrs:{replace:"",to:"/layout/search",icon:"search"}},[t._v("搜索")])],1)],1)},ot=[],lt={name:"LayoutIndex",data(){return{layout_title:this.$route.meta.title}},watch:{$route(){this.layout_title=this.$route.meta.title}}},ct=lt,ut=(0,b.Z)(ct,rt,ot,!1,null,"08316156",null),ht=ut.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"play"},[s("div",{staticClass:"song-bg",style:"background-image: url("+(t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl)+"?imageView&thumbnail=360y360&quality=75&tostatic=0);"}),s("div",{staticClass:"header"},[s("van-icon",{staticClass:"left-incon",attrs:{name:"arrow-left",size:"20"},on:{click:function(e){return t.$router.back()}}})],1),s("div",{staticClass:"song-wrapper"},[s("div",{staticClass:"song-turn ani",style:"animation-play-state:"+(t.playState?"running":"paused")},[s("div",{staticClass:"song-img"},[s("img",{staticStyle:{width:"100%"},attrs:{src:(t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl)+"?imageView&thumbnail=360y360&quality=75&tostatic=0",alt:""}})])]),s("div",{staticClass:"start-box",on:{click:t.audioStart}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!t.playState,expression:"!playState"}],staticClass:"song-start"})]),s("div",{staticClass:"song-msg"},[s("h2",{staticClass:"m-song-h2"},[s("span",{staticClass:"m-song-sname"},[t._v(t._s(t.songInfo.name)+"-"+t._s(t.songInfo&&t.songInfo.ar&&t.songInfo.ar[0].name))])]),s("div",{staticClass:"lrcContent"},[s("p",{staticClass:"lrc"},[t._v(t._s(t.curLyric))])])]),s("div",{staticClass:"needle",style:"transform: rotate("+t.needleDeg+");"})]),s("audio",{ref:"audio",attrs:{preload:"true",src:"https://music.163.com/song/media/outer/url?id="+t.id+".mp3"}})])},mt=[],pt={components:{[r.Z.name]:r.Z},name:"PlayMusic",data(){return{playState:!1,id:this.$route.query.id,songInfo:{},lyric:{},curLyric:"",lastLy:""}},computed:{needleDeg(){return this.playState?"-7deg":"-38deg"}},methods:{async getSong(){const t=await P(this.id);this.songInfo=t.data.songs[0];const e=await N(this.id),s=e.data.lrc.lyric;this.lyric=this._formatLyr(s),this.curLyric=this.lyric[0]},_formatLyr(t){let e=/\[.+?\]/g,s=t.match(e),a=t.split(/\[.+?\]/).slice(1),i={};return s.forEach(((t,e)=>{let s=60*t.split(":")[0].split("")[2],n="0"===t.split(":")[1].split(".")[0].split("")[0]?t.split(":")[1].split(".")[0].split("")[1]:t.split(":")[1].split(".")[0];i[s+Number(n)]=a[e]})),i},audioStart(){this.playState?this.$refs.audio.pause():this.$refs.audio.play(),this.playState=!this.playState},showLyric(){this.$refs.audio.addEventListener("timeupdate",(()=>{let t=Math.floor(this.$refs.audio.currentTime);this.lyric[t]?(this.curLyric=this.lyric[t],this.lastLy=this.curLyric):this.curLyric=this.lastLy}))}},mounted(){this.getSong(),this.showLyric(),console.log(this.$route.query.id)}},ft=pt,gt=(0,b.Z)(ft,dt,mt,!1,null,"6c0b985e",null),yt=gt.exports,vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{title:"评论","left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.commentlist,(function(e){return s("van-cell",{key:e.commentId,attrs:{title:"item"}},[s("van-image",{staticStyle:{"margin-right":"10px"},attrs:{slot:"icon",round:"",width:"30",height:"30",src:e.user.avatarUrl},slot:"icon"}),s("span",{staticStyle:{color:"#466b9d"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.user.nickname))]),s("div",{attrs:{slot:"label"},slot:"label"},[s("p",{staticStyle:{color:"#363636"}},[t._v(t._s(e.content))]),s("p",[s("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.timeStr))])])]),s("van-icon",{attrs:{slot:"right-icon",name:"like-o"},slot:"right-icon"})],1)})),1)],1)],1)},_t=[],wt={data(){return{isLoading:!1,commentlist:[],id:this.$route.query.id,loading:!1,finished:!1,page:1}},name:"MusicAppIndex",methods:{async getlist(){const t=await R({id:this.id,limit:10,offset:10*(this.page-1)});t.data.comments.forEach((t=>{this.commentlist.push(t)})),this.isLoading=!1,this.loading=!1},async onRefresh(){this.commentlist=[],this.getlist(),this.isLoading=!1,this.page=1},async onLoad(){this.getlist(),this.page++}}},bt=wt,Zt=(0,b.Z)(bt,vt,_t,!1,null,"b47dc036",null),Lt=Zt.exports;g.Z.use(k.Z);const kt=[{path:"/",redirect:"/layout"},{path:"/layout",redirect:"/layout/home",component:ht,children:[{path:"home",component:Y,meta:{title:"首页"}},{path:"search",component:nt,meta:{title:"搜索"}}]},{path:"/play",component:yt,meta:{title:"播放"}},{path:"/comment",component:Lt,meta:{titie:"评论"}}],xt=new k.Z({routes:kt});var Ct=xt;async function St(){const t=await D({email:"sowegn2941@163.com",password:"20011031Czczcz"});console.log(t)}g.Z.config.productionTip=!1,g.Z.use(f.Z),g.Z.use(p.Z),g.Z.use(m.Z),g.Z.use(d.Z),g.Z.use(h.Z),g.Z.use(u.Z),g.Z.use(c.Z),g.Z.use(l.Z),g.Z.use(o.Z),g.Z.use(r.Z),g.Z.use(n.Z),g.Z.use(i.Z),g.Z.use(a.Z),St(),new g.Z({router:Ct,render:t=>t(L)}).$mount("#app")}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,n){if(!a){var r=1/0;for(u=0;u<t.length;u++){a=t[u][0],i=t[u][1],n=t[u][2];for(var o=!0,l=0;l<a.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[a,i,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,n,r=a[0],o=a[1],l=a[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)var u=l(s)}for(e&&e(a);c<r.length;c++)n=r[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},a=self["webpackChunkmusic_app"]=self["webpackChunkmusic_app"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(5619)}));a=s.O(a)})();
//# sourceMappingURL=app.e27993de.js.map